{% if pxe is defined and pxe == "6" %}
  {% set ignition = "[" + helper.ipaddr6 + "]" %}
  {% set ipconfig = "dhcp6" %}
{% else %}
  {% set ignition = helper.ipaddr %}
  {% set ipconfig = "dhcp" %}
{% endif %}

set default=0
set timeout=10

menuentry 'Install {{ node }} Node' {
  linuxefi rhcos/kernel initrd=rhcos/initramfs.img nomodeset rd.neednet=1 rd.net.timeout.carrier=60 rd.net.timeout.dhcp=20 rd.net.dhcp.retry=10 bootdev={{networkifacename}} ip={{networkifacename}}:{{ipconfig}} ip=eno1:none coreos.inst=yes coreos.inst.install_dev={{ disk }} coreos.live.rootfs_url=http://{{ ignition }}:8080/install/rootfs.img coreos.inst.ignition_url=http://{{ ignition }}:8080/ignition/{{ node }}.ign coreos.no_persist_ip={{ persistnetwork }}
  initrdefi rhcos/initramfs.img
}
